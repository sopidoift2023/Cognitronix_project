<!-- templates/pages/join.html -->
{% extends "pages/base.html" %}

{% block title %}Join Our Team - Cognitronix{% endblock %}

{% block content %}
<!-- Hero -->
<section class="pt-16 pb-12 section-bg">
    <div class="container mx-auto px-6 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
            Join Our <span class="gradient-text">AI Training Team</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Complete your application to become an AI trainer. Flexible work, competitive pay, and shape the future of AI.
        </p>
        <div class="mt-6 flex items-center justify-center space-x-2 text-sm text-gray-500">
            <i class="fas fa-shield-alt"></i>
            <span>All data is secured with 256-bit encryption</span>
        </div>
    </div>
</section>

<!-- Application Form -->
<section class="py-8 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <!-- Progress Indicator -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">Application Progress</span>
                        <!--<span class="text-sm font-medium text-blue-600">Step 1 of 3</span>-->
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-gradient-to-r from-blue-500 to-cyan-500 h-2 rounded-full w-1/3"></div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Complete Your Application</h2>
                <p class="text-gray-600 text-center mb-8">Fill in all required fields (*) to proceed</p>

                <form id="applicationForm" action="https://usebasin.com/f/481b4f7065c2"
                      class="space-y-8"
                      method="POST">
                    {% csrf_token %}

 
                    <!-- Section 1: Personal Information -->
                    <div class="bg-blue-50 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white mr-3">1</span>
                            Personal Information
                        </h3>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- First Name -->
                            <div>
                                <label for="firstName" class="block text-gray-700 font-medium mb-2">
                                    First Name *
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-user text-gray-400"></i>
                                    </div>
                                    <input type="text" id="firstName" name="firstName" required
                                           class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                           placeholder="John">
                                </div>
                            </div>

                            <!-- Middle Name -->
                            <div>
                                <label for="middleName" class="block text-gray-700 font-medium mb-2">
                                    Middle Name
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-user text-gray-400"></i>
                                    </div>
                                    <input type="text" id="middleName" name="middleName"
                                           class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                           placeholder="Michael">
                                </div>
                            </div>

                            <!-- Last Name -->
                            <div>
                                <label for="lastName" class="block text-gray-700 font-medium mb-2">
                                    Last Name *
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-user text-gray-400"></i>
                                    </div>
                                    <input type="text" id="lastName" name="lastName" required
                                           class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                           placeholder="Doe">
                                </div>
                            </div>
                        </div>

                        <!-- Date of Birth -->
                        <div class="mt-6">
                            <label for="dob" class="block text-gray-700 font-medium mb-2">
                                Date of Birth (MM/DD/YYYY) *
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-calendar-alt text-gray-400"></i>
                                </div>
                                <input type="date" id="dob" name="dob" required
                                       class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <p class="mt-1 text-xs text-gray-500">Format: Month/Day/Year</p>
                            </div>
                        </div>
                    </div>

                    <!-- Section 2: Account & Contact Information -->
                    <div class="bg-blue-50 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white mr-3">2</span>
                            Account & Contact Information
                        </h3>

                        <!-- Email -->
                        <div class="mb-6">
                            <label for="email" class="block text-gray-700 font-medium mb-2">
                                Email Address *
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-envelope text-gray-400"></i>
                                </div>
                                <input type="email" id="email" name="email" required
                                       class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="john.doe@example.com">
                            </div>
                        </div>

                        <!-- Password Fields -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="password" class="block text-gray-700 font-medium mb-2">
                                    Password *
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-lock text-gray-400"></i>
                                    </div>
                                    <input type="password" id="password" name="password" required minlength="8"
                                           class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                           placeholder="••••••••">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <button type="button" onclick="togglePasswordVisibility('password')" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                                            <i id="passwordIcon" class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="mt-1 text-xs text-gray-500">Minimum 8 characters</p>
                            </div>

                            <div>
                                <label for="confirmPassword" class="block text-gray-700 font-medium mb-2">
                                    Confirm Password *
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-lock text-gray-400"></i>
                                    </div>
                                    <input type="password" id="confirmPassword" name="confirmPassword" required
                                           class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                           placeholder="••••••••"
                                           onkeyup="checkPasswordMatch()">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <button type="button" onclick="togglePasswordVisibility('confirmPassword')" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                                            <i id="confirmPasswordIcon" class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                <p id="passwordMatch" class="mt-1 text-xs"></p>
                            </div>
                        </div>

                        <!-- Residential Address -->
                        <div class="mb-6">
                            <label for="address" class="block text-gray-700 font-medium mb-2">
                                Current Residential Address *
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 pt-3 pointer-events-none">
                                    <i class="fas fa-home text-gray-400"></i>
                                </div>
                                <textarea id="address" name="address" rows="3" required
                                          class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                          placeholder="Street address, Apt/Unit number"></textarea>
                            </div>
                        </div>

                        <!-- Location Fields -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="country" class="block text-gray-700 font-medium mb-2">
                                    Country *
                                </label>
                                <select id="country" name="country" required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                    <option value="">Select Country</option>
                                    <option value="US">US</option>
                                    <option value="UK">UK</option>
                                    <option value="CA">Canada</option>
                                    <option value="FR">France</option>
                                    <option value="SE">Sweden</option>
                                    <option value="TR">Turkey</option>
                                    <option value="ES">Spain</option>
                                    <option value="DE">Germany</option>
                                    <option value="RU">Russia</option>
                                    <option value="PL">Poland</option>
                                    <option value="UA">Ukraine</option>
                                    <option value="OT">Other</option>
                                </select>
                            </div>

                            <div>
                                <label for="state" class="block text-gray-700 font-medium mb-2">
                                    State/Province *
                                </label>
                                <input type="text" id="state" name="state" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="California">
                            </div>

                            <div>
                                <label for="zipCode" class="block text-gray-700 font-medium mb-2">
                                    Zip/Postal Code *
                                </label>
                                <input type="text" id="zipCode" name="zipCode" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="90210">
                            </div>
                        </div>
                    </div>

                    <!-- Section 3: Work Eligibility & Availability -->
                    <div class="bg-blue-50 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white mr-3">3</span>
                            Work Eligibility & Availability
                        </h3>

                        <!-- Work Authorization -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-2">
                                Are you authorized to work in your country of residence? *
                            </label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <label class="flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="radio" name="workAuth" value="Yes" required class="mr-3 h-5 w-5 text-blue-600">
                                    <div>
                                        <span class="font-medium">Yes</span>
                                        <p class="text-sm text-gray-500 mt-1">I have legal authorization to work</p>
                                    </div>
                                </label>
                                <label class="flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="radio" name="workAuth" value="No" required class="mr-3 h-5 w-5 text-blue-600">
                                    <div>
                                        <span class="font-medium">No</span>
                                        <p class="text-sm text-gray-500 mt-1">I require sponsorship</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Work Hours (Keep your excellent design) -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-4">
                                How many hours per week are you available? *
                            </label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-all duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                                    <input type="radio" name="hours" value="1-5" required class="sr-only peer">
                                    <div class="text-2xl font-bold text-gray-700 peer-checked:text-blue-600">1-5</div>
                                    <div class="text-sm text-gray-600 mt-1">hours/week</div>
                                    <div class="mt-2 text-xs text-gray-500 text-center">Casual</div>
                                </label>
                                <label class="flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-all duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                                    <input type="radio" name="hours" value="6-10" required class="sr-only peer">
                                    <div class="text-2xl font-bold text-gray-700 peer-checked:text-blue-600">6-10</div>
                                    <div class="text-sm text-gray-600 mt-1">hours/week</div>
                                    <div class="mt-2 text-xs text-gray-500 text-center">Part-time</div>
                                </label>
                                <label class="flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-all duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                                    <input type="radio" name="hours" value="11-20" required class="sr-only peer">
                                    <div class="text-2xl font-bold text-gray-700 peer-checked:text-blue-600">11-20</div>
                                    <div class="text-sm text-gray-600 mt-1">hours/week</div>
                                    <div class="mt-2 text-xs text-gray-500 text-center">Half-time</div>
                                </label>
                                <label class="flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-all duration-200 has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                                    <input type="radio" name="hours" value="20+" required class="sr-only peer">
                                    <div class="text-2xl font-bold text-gray-700 peer-checked:text-blue-600">20+</div>
                                    <div class="text-sm text-gray-600 mt-1">hours/week</div>
                                    <div class="mt-2 text-xs text-gray-500 text-center">Full-time</div>
                                </label>
                            </div>
                        </div>

                        <!-- Languages -->
                        <div class="mb-6">
                            <label for="languages" class="block text-gray-700 font-medium mb-2">
                                What languages do you speak fluently? *
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-language text-gray-400"></i>
                                </div>
                                <input type="text" id="languages" name="languages" required
                                       class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="e.g., English, Spanish, French">
                            </div>
                            <p class="mt-1 text-xs text-gray-500">Separate languages with commas</p>
                        </div>

                        <!-- Motivation - CHANGED: Removed 'required' attribute -->
                        <div>
                            <label for="motivation" class="block text-gray-700 font-medium mb-2">
                                Why do you want to join our AI training team? (Optional)
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 pt-3 pointer-events-none">
                                    <i class="fas fa-comment-alt text-gray-400"></i>
                                </div>
                                <textarea id="motivation" name="motivation" rows="4"
                                          class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                          placeholder="Tell us about your interest in AI, relevant experience, and what you hope to achieve... (Optional)"></textarea>
                            </div>
                            <p class="mt-1 text-xs text-gray-500">Optional field - Minimum 100 characters if filled</p>
                            <div class="mt-2 text-right">
                                <span id="charCount" class="text-sm text-gray-500">0 characters</span>
                            </div>
                        </div>
                    </div>

                    <!-- Terms & Submit -->
                    <div class="space-y-6">
                        <div class="flex items-start p-4 bg-gray-50 rounded-lg">
                            <input type="checkbox" id="terms" name="terms" required
                                   class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded focus:ring-blue-500">
                            <label for="terms" class="text-gray-700">
                                I certify that all information provided is accurate and complete.
                                I agree to the
                                <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Terms of Service</a>
                                and
                                <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Privacy Policy</a>.
                                I confirm that I am at least 18 years old and authorized to submit this application. *
                            </label>
                        </div>

                        <!-- Security Notice -->
                        <div class="bg-green-50 border border-green-200 rounded-xl p-4">
                            <div class="flex">
                                <i class="fas fa-shield-alt text-green-500 mt-1 mr-3"></i>
                                <div>
                                    <p class="font-medium text-green-800">Your Data is Secure</p>
                                    <p class="text-green-700 text-sm mt-1">
                                        All information is encrypted and protected. Passwords are hashed and never stored in plain text.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center pt-4">
                            <button type="submit"
                                    class="btn-primary px-12 py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300">
                                <i class="fas fa-paper-plane mr-3"></i> Submit Application
                            </button>
                            <p class="text-gray-500 text-sm mt-4">
                                We'll review your application and contact you within 3 business days.
                            </p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section (Keep existing) -->
<section class="py-16 bg-gray-50">
    <div class="container mx-auto px-6">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">Why Choose Cognitronix?</h2>
            <p class="text-gray-600 max-w-3xl mx-auto">Benefits of joining our AI training team</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="bg-white rounded-2xl p-8 text-center card-hover">
                <div class="w-16 h-16 gradient-bg rounded-xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-money-bill-wave text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">Competitive Earnings</h3>
                <p class="text-gray-600">Earn $15-$30 per hour with weekly payments</p>
            </div>

            <div class="bg-white rounded-2xl p-8 text-center card-hover">
                <div class="w-16 h-16 gradient-bg rounded-xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-calendar-alt text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">Flexible Schedule</h3>
                <p class="text-gray-600">Work whenever you want, no minimum hours</p>
            </div>

            <div class="bg-white rounded-2xl p-8 text-center card-hover">
                <div class="w-16 h-16 gradient-bg rounded-xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-graduation-cap text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">Skill Development</h3>
                <p class="text-gray-600">Learn AI skills with our comprehensive training</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Your Google Apps Script Web App URL
//const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxmiMVQR8W76TkjMaNphsCFuNmEtoRCGg0HCQUxJCC4U2qvu8G9gZL0MH-zvmmHWNfzvQ/exec';

// Collect ALL form data including new fields
function collectFormData() {
    return {
        firstName: document.getElementById('firstName').value.trim(),
        middleName: document.getElementById('middleName').value.trim(),
        lastName: document.getElementById('lastName').value.trim(),
        email: document.getElementById('email').value.trim(),
        password: document.getElementById('password').value,
        dob: document.getElementById('dob').value,
        address: document.getElementById('address').value.trim(),
        country: document.getElementById('country').value,
        state: document.getElementById('state').value.trim(),
        zipCode: document.getElementById('zipCode').value.trim(),
        workAuth: document.querySelector('input[name="workAuth"]:checked')?.value || '',
        hours: document.querySelector('input[name="hours"]:checked')?.value || '',
        languages: document.getElementById('languages').value.trim(),
        motivation: document.getElementById('motivation').value.trim(), // Now optional
        terms: document.getElementById('terms').checked ? 'true' : 'false'
    };
}

// FIXED: Password visibility toggle function
function togglePasswordVisibility(fieldId) {
    const field = document.getElementById(fieldId);
    let iconId;
    
    if (fieldId === 'password') {
        iconId = 'passwordIcon';
    } else if (fieldId === 'confirmPassword') {
        iconId = 'confirmPasswordIcon';
    } else {
        return;
    }
    
    const icon = document.getElementById(iconId);
    
    if (field.type === 'password') {
        field.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        field.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}

function checkPasswordMatch() {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const message = document.getElementById('passwordMatch');

    if (!confirmPassword) {
        message.textContent = '';
        return;
    }

    if (password === confirmPassword) {
        message.textContent = '✓ Passwords match';
        message.className = 'mt-1 text-xs text-green-600';
    } else {
        message.textContent = '✗ Passwords do not match';
        message.className = 'mt-1 text-xs text-red-600';
    }
}

// Character count for motivation - UPDATED: Only validate if field has content
document.getElementById('motivation').addEventListener('input', function() {
    const charCount = this.value.length;
    document.getElementById('charCount').textContent = `${charCount} characters`;

    // Only apply validation styles if user has entered something
    if (charCount > 0) {
        if (charCount < 100) {
            this.classList.add('border-yellow-500');
            this.classList.remove('border-green-500');
        } else {
            this.classList.remove('border-yellow-500');
            this.classList.add('border-green-500');
        }
    } else {
        // Reset styles if field is empty
        this.classList.remove('border-yellow-500', 'border-green-500');
    }
});

// Dynamic work authorization question
document.getElementById('country').addEventListener('change', function() {
    const country = this.options[this.selectedIndex].text;
    const label = document.querySelector('label[for="workAuth"]');
    if (label) {
        label.innerHTML = `Are you authorized to work in <span class="font-bold">${country}</span>? *`;
    }
});

// Add event listeners for password eye icons on page load
document.addEventListener('DOMContentLoaded', function() {
    // Initialize eye icons for password fields
    const passwordField = document.getElementById('password');
    const confirmField = document.getElementById('confirmPassword');
    
    if (passwordField) {
        passwordField.type = 'password'; // Ensure it starts as password
    }
    
    if (confirmField) {
        confirmField.type = 'password'; // Ensure it starts as password
    }
});
</script>
{% endblock %}